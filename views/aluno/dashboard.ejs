<%- include('../partials/header') %>

<h1>Meu Dashboard - <%= user.nome %></h1>

<div class="d-flex justify-content-between align-items-center mb-3 mt-5">
    <h3>Meus Projetos</h3>
    <a href="/aluno/projetos/novo" class="btn btn-success">Novo Projeto</a>
</div>

<div class="list-group shadow-sm">
    <% if (typeof projetos !== 'undefined' && projetos.length > 0) { %>
        <% projetos.forEach(projeto => { %>
            <div class="list-group-item">
                <h5><%= projeto.nome %></h5>
                <p><%= projeto.resumo %></p>
                <a href="<%= projeto.link %>" target="_blank" class="btn btn-sm btn-outline-secondary">Link</a>
                <a href="/aluno/projetos/editar/<%= projeto._id %>" class="btn btn-sm btn-warning">Editar</a>
                <form action="/aluno/projetos/deletar/<%= projeto._id %>" method="POST" style="display: inline;" onsubmit="return confirm('Tem certeza?');">
                    <button type="submit" class="btn btn-sm btn-danger">Excluir</button>
                </form>
            </div>
        <% }) %>
    <% } else { %>
        <p class="text-center p-3">Você ainda não cadastrou nenhum projeto.</p>
    <% } %>
</div>

<div class="d-flex justify-content-between align-items-center mt-5 mb-3">
    <h3>Meus Conhecimentos</h3>
    <a href="/aluno/conhecimentos" class="btn btn-info">Gerenciar Conhecimentos</a>
</div>

<div class="list-group shadow-sm">
    <% if (typeof conhecimentos !== 'undefined' && conhecimentos.length > 0) { %>
        <% conhecimentos.forEach(mc => { %>
            <div class="list-group-item">
                <strong><%= mc.conhecimento ? mc.conhecimento.nome : 'N/A' %></strong>
                <div class="progress" style="height: 15px;">
                    <div class="progress-bar" role="progressbar" 
                         style="width: <%= mc.nivel * 10 %>%;" 
                         aria-valuenow="<%= mc.nivel %>" aria-valuemin="0" aria-valuemax="10">
                        Nível <%= mc.nivel %>/10
                    </div>
                </div>
            </div>
        <% }) %>
    <% } else { %>
        <div class="list-group-item text-center text-muted">
            Você ainda não adicionou nenhum conhecimento.
        </div>
    <% } %>
</div>
<%- include('../partials/footer') %>